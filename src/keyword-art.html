<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<!-- Gets top 5 art pieces relevant to given keyword -->
<dom-module id="keyword-art">

  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }
      img {
        border: 1px solid blue;
        height: 200px;
        width: inherit;
      }
    </style>
    <iron-ajax
      auto
      url="{{url}}"
      handle-as="json"
      params="{{params}}"
      last-response="{{response}}"
    ></iron-ajax>
    <div>
      <!-- <h4>[[keyword]]</h4>
      <p>[[response.info.pages]]</p> -->
      <template is="dom-repeat" items="{{response.records}}">
        <!-- <p>{{item.title}}</p>
        <p>{{item.description}}</p> -->
        <img src="{{item.primaryimageurl}}">
      </template>
  </div>
  </template>

  <script>
    Polymer({
      is: 'keyword-art',
      properties: {
          apikey: {
              value: "9c6efbf0-b43e-11e6-a912-5bf7795f06a9",
              notify: true
          },
          keyword: {
              value: "government",
              notify: true
          },
          url: {
              value: "http://api.harvardartmuseums.org/object"
          },
          params: {
              computed: "computeParams(apikey, keyword)"
          },
          response: {
              value: {},
              notify: true,
              observer: "responseChanged"
          },
          results: {
              type: Number,
              notify: true,
              observer: "resultsChanged"
          }
      },
      resultsChanged: function(r) {

      },
      computeResults: function(r) {
          this.results = r;
      },
      computeParams: function (apikey, keyword) {
          return {apikey: apikey, keyword: keyword, size: 5};
      },
      responseChanged: function (resp) {
          if (resp.info) { this.computeResults(resp.info.totalrecords); };
      }
  });
  </script>
</dom-module>
